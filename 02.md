# 2 Java多线程入门类和接口
## 2.1 Thread类和Runnable接口
继承Thread或实现Runnable接口,重写run()方法,来使用线程.

### 2.1.1 继承Thread类
java->c10.Demo
### 2.1.2 实现Runnable接口
java->c11.Demo2
### 2.1.3 Thread类构造方法
一般调用 Thread(Runnable target) 和 Thread(Runnable target, String name)
```java
import java.security.AccessControlContext;
import java.security.AccessController;

public class Demo {
    /**
     * @param g 线程组
     * @param target 执行的任务
     * @param name 线程名称
     * @param stackSize
     * @param acc 用于初始化变量inheritedAccessControlContext,一般不使用
     * @param inheritThreadLocals: 可继承的ThreadLocal
     */
    private void init(ThreadGroup g, Runnable target, String name,
                      long stackSize, AccessControlContext acc,
                      boolean inheritThreadLocals) {
        this.inheritedAccessControlContext = acc != null ? acc : AccessController.getContext();
        
        ThreadLocal.ThreadLocalMap threadLocals = null;
        ThreadLocal.ThreadLocalMap inheritableThreadLocals = null;
    }

    public Thread(Runnable target) {
        init(null, target, "Thread-" + nextThreadNum(), 0);
    }
}
```
### 2.1.4 Thread类的几个常用方法
Thread的常用方法:
- currentThread(): 返回当前线程
- start(): 启动线程
- yield(): 让步给其他线程
- sleep(): 休眠
- join(): 等待另一个线程执行完继续执行
### 2.1.5 Thread类与Runnable接口的比较
Runnable是接口,Thread是类,优先使用接口,更灵活
## 2.2 Callable, Future与FutureTask
- Runnable: 无返回值
- Callable: 有返回值,无取消
- Future: 有返回值,有取消方法
### 2.2.1 Callable接口
```java
public interface Callable<V> {
    V call() throws Exception;
}
```
java->c02.MyCallable
### 2.2.2 Future接口
```java
public interface Future<V> {
    /**
     * 尝试取消线程,不一定成功
     * @return 是否成功
     */
    boolean cancel(boolean mayInterruptIfRunning);
    boolean isCancelled();
    boolean isDone();
    V get() throws InterruptedException, ExecutionException;
    V get(long timeout, TimeUnit unit)
}
```
### 2.2.3 FutureTask类
FutureTask是Future的实现类,具体实现了Runnable和Future.
java->c03.Task
### 2.2.4 FutureTask的几个状态
NEW -> COMPLETING -> NORMAL
NEW -> COMPLETING -> EXCEPTIONAL
NEW -> CANCELLED
NEW -> INTERRUPTING -> INTERRUPTED